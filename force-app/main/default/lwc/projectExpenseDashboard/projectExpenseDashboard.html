<template>
    <lightning-card title="Projects and Expenses">

        <!--SEARCH BAR -->
        <div class="slds-p-around_small">
            <lightning-input 
                type="search"
                label="Search Projects"
                placeholder="Search by Project Name..."
                value={searchKey}
                onchange={handleSearch}>
            </lightning-input>
        </div>

        <!-- MAIN PROJECT TABLE -->
        <div class="slds-box">
        <c-custom-datatable-comp
            key-field="Id"
            data={filteredProjects}
            columns={columns}
            hide-checkbox-column
            onrowaction={handleRowAction}>
        </c-custom-datatable-comp>
        </div>


        <!-- CHILD EXPENSE TABLE -->
        <template if:true={expandedProjectId}>
            <div class="slds-m-top_medium slds-box">
                <h3 class="slds-text-heading_small slds-m-bottom_small">
                    Related Expenses
                </h3>

                <c-custom-datatable-comp
                    key-field="Id"
                    data={expandedExpenses}
                    columns={expenseColumns}
                    hide-checkbox-column
                    onrowaction={handleRowAction}>
                </c-custom-datatable-comp>
            </div>
        </template>

    </lightning-card>
</template>
